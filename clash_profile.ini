[custom]
; ========= 开关 & 规则集刷新 =========
enable_rule_generator=true
overwrite_original_rules=true
rule_provider_interval=86400
skip_failed_ruleset=true

; ========= 策略组（域名组 -> 节点组） =========
custom_proxy_group=🛑 广告拦截`select`[]DIRECT`[]REJECT
custom_proxy_group=🤖 ChatGPT`select`[]🇺🇸 美国`[]🌐 所有节点
custom_proxy_group=🌏 国内`select`[]DIRECT
custom_proxy_group=🎵 TikTok`select`[]🌏 亚洲`[]🇺🇸 美国`[]🌍 欧洲`[]🌐 所有节点
custom_proxy_group=🎥 流媒体`select`[]🌏 亚洲`[]🇺🇸 美国`[]🌐 所有节点
custom_proxy_group=🚀 外网`select`[]🇺🇸 美国`[]🌍 欧洲`[]🌎 美洲`[]🌏 亚洲`[]🌐 所有节点`[]DIRECT`[]REJECT
custom_proxy_group=🐟 漏网之鱼`select`[]🚀 外网`[]🌐 所有节点`[]DIRECT`[]REJECT

; ========= 节点组（地域聚合 & 全部） =========
custom_proxy_group=🌐 所有节点`select`.*
custom_proxy_group=🇭🇰 香港`url-test`((?i)香港|HK|Hong Kong|HongKong|HK- )`https://www.gstatic.com/generate_204`300,5,100
custom_proxy_group=🇹🇼 台湾`url-test`((?i)台湾|台灣|臺灣|TW|Taiwan|台北|Taipei|TW- )`https://www.gstatic.com/generate_204`300,5,100
custom_proxy_group=🇯🇵 日本`url-test`((?i)日本|JP|Tokyo|大阪|Osaka|JP- )`https://www.gstatic.com/generate_204`300,5,100
custom_proxy_group=🇸🇬 新加坡`url-test`((?i)新加坡|SG|Singapore|狮城|SG- )`https://www.gstatic.com/generate_204`300,5,100
custom_proxy_group=🇺🇸 美国`url-test`((?i)美国|US|USA|United States|洛杉矶|Los Angeles|圣何塞|San Jose|西雅图|Seattle|US- )`https://www.gstatic.com/generate_204`300,5,100

; ========= 规则集（来源声明 -> 生成 rule-providers） =========
; 语法：ruleset=名称,URL[,类型]
ruleset=reject,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt,domain
ruleset=chatgpt,https://cdn.jsdelivr.net/gh/Y-0Dfei/clash@main/ChatGPT.txt,domain
ruleset=cn,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt,domain
ruleset=cncidr,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt,ipcidr
ruleset=tiktok,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/TikTok/TikTok.list,classical
ruleset=hbo,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/HBO/HBO.list,classical
ruleset=youtube,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.list,classical
ruleset=disney,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.list,classical
ruleset=netflix,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.list,classical
ruleset=spotify,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.list,classical
ruleset=proxy,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt,domain
ruleset=gfw,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt,domain
ruleset=tld-not-cn,https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt,domain

; ========= 规则集到策略组的映射（生成 rules: 中的 RULE-SET 行） =========
; 顺序即匹配优先级（自上而下）
ruleset=reject,🛑 广告拦截
ruleset=chatgpt,🤖 ChatGPT
ruleset=tiktok,🎵 TikTok
ruleset=hbo,🎥 流媒体
ruleset=youtube,🎥 流媒体
ruleset=disney,🎥 流媒体
ruleset=netflix,🎥 流媒体
ruleset=spotify,🎥 流媒体
ruleset=cn,🌏 国内
ruleset=cncidr,🌏 国内
ruleset=proxy,🚀 外网
ruleset=gfw,🚀 外网
ruleset=tld-not-cn,🚀 外网

; 兜底条目（追加到 rules: 末尾）
custom_rules=MATCH,🐟 漏网之鱼

; ========= DNS 注入到 Clash 配置（与 Meta 内核配合） =========
clash.dns.enable=true
clash.dns.ipv6=false
clash.dns.enhanced-mode=fake-ip
clash.dns.fake-ip-range=198.18.0.1/16
clash.dns.listen=0.0.0.0:7874
clash.dns.fake-ip-filter=*.lan,*.localdomain,*.example,*.invalid,*.localhost,*.test,*.local,*.home.arpa,www.gstatic.com,cp.cloudflare.com,www.apple.com
clash.dns.nameserver=223.5.5.5,223.6.6.6,114.114.114.114,114.114.115.115,1.1.1.1,1.0.0.1,8.8.8.8,8.8.4.4
clash.dns.fallback=1.1.1.1,1.0.0.1,8.8.8.8,8.8.4.4
clash.dns.fallback-filter.geoip=true
clash.dns.fallback-filter.geoip-code=CN
clash.dns.fallback-filter.ipcidr=240.0.0.0/4
